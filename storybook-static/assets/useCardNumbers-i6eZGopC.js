import{j as r}from"./jsx-runtime-BnIj46N_.js";import{T as I,C as b,L,E as j}from"./ErrorMessage-JATCi31F.js";import{I as d}from"./Input-Dqji-sXd.js";import{u as f}from"./styled-components.browser.esm-BDDUX98t.js";import{r as u}from"./index-CsdIBAqE.js";import{i as C}from"./isNumericString-BqsgwGh2.js";import{u as M}from"./useBoolean-C4Nz0XNG.js";function y({valueState:e,errorState:a,inputRefs:o,onChange:i,onBlur:m}){return u.useEffect(()=>{var c;(c=o[0].current)==null||c.focus()},[]),r.jsxs(H,{children:[r.jsxs("div",{children:[r.jsx(I,{children:"결제할 카드 번호를 입력해 주세요"}),r.jsx(b,{children:"본인 명의의 카드만 결제 가능합니다."})]}),r.jsxs(w,{children:[r.jsx(L,{children:"카드 번호"}),r.jsxs(O,{children:[r.jsx(d,{ref:o[0],maxLength:4,placeholder:"1234",value:e[0],isError:a.isError[0],onChange:i(0),onBlur:m(0)}),r.jsx(d,{ref:o[1],maxLength:4,placeholder:"1234",value:e[1],isError:a.isError[1],onChange:i(1),onBlur:m(1)}),r.jsx(d,{ref:o[2],maxLength:4,placeholder:"1234",type:"password",value:e[2],isError:a.isError[2],onChange:i(2),onBlur:m(2)}),r.jsx(d,{ref:o[3],maxLength:4,placeholder:"1234",type:"password",value:e[3],isError:a.isError[3],onChange:i(3),onBlur:m(3)})]}),a.isError.some(c=>c)&&r.jsx(j,{message:a.errorMessage})]})]})}const H=f.div`
  display: flex;
  flex-direction: column;
  gap: 16px;
`,w=f.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,O=f.div`
  display: flex;
  gap: 10px;
`;y.__docgenInfo={description:"",methods:[],displayName:"CardNumbersInput",props:{valueState:{required:!0,tsType:{name:"tuple",raw:"[string, string, string, string]",elements:[{name:"string"},{name:"string"},{name:"string"},{name:"string"}]},description:""},errorState:{required:!0,tsType:{name:"CardNumbersErrorState"},description:""},inputRefs:{required:!0,tsType:{name:"tuple",raw:`[\r
  React.RefObject<HTMLInputElement>,\r
  React.RefObject<HTMLInputElement>,\r
  React.RefObject<HTMLInputElement>,\r
  React.RefObject<HTMLInputElement>,\r
]`,elements:[{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:`(\r
  targetIndex: number\r
) => (event: React.ChangeEvent<HTMLInputElement>) => void`,signature:{arguments:[{type:{name:"number"},name:"targetIndex"}],return:{name:"signature",type:"function",raw:"(event: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}}}},description:""},onBlur:{required:!0,tsType:{name:"signature",type:"function",raw:`(\r
  targetCardNumberIndex: number\r
) => (event: React.FocusEvent<HTMLInputElement>) => void`,signature:{arguments:[{type:{name:"number"},name:"targetCardNumberIndex"}],return:{name:"signature",type:"function",raw:"(event: React.FocusEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}}}},description:""}}};const N=e=>{if(!C(e))throw new Error("카드 번호는 숫자만 입력할 수 있어요")},B=e=>{if(e.length!==4)throw new Error("네 자리 수를 입력해주세요")},F=e=>e.every(a=>a.length===4),q=e=>e.length===4,S=e=>e===3,G=()=>{const[e,a]=u.useState(["","","",""]),[o,i]=u.useState({isError:[!1,!1,!1,!1],errorMessage:""}),{flag:m,setTrue:c}=M(),E=[u.useRef(null),u.useRef(null),u.useRef(null),u.useRef(null)],g=(n,s)=>{a(t=>{const p=[...t];return p[s]=n,p})},l=(n,s,t)=>{i(p=>({isError:p.isError.map((x,T)=>T===s?n:x),errorMessage:t}))},R=(n,s)=>{var t;!q(n)||S(s)||(t=E[s+1].current)==null||t.focus()},v=n=>s=>{try{const{value:t}=s.target;N(t),g(t,n),l(!1,n,""),R(t,n)}catch(t){t instanceof Error&&l(!0,n,t.message)}},h=n=>s=>{try{B(s.target.value),l(!1,n,"")}catch(t){t instanceof Error&&l(!0,n,t.message)}};return u.useEffect(()=>{m||F(e)&&c()},[e]),{isDoneThisStep:m,cardNumbersInputProps:{valueState:e,errorState:o,inputRefs:E,onChange:v,onBlur:h}}};export{y as C,G as u};
